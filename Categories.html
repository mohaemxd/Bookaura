<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Infant:ital,wght@0,300..700;1,300..700&display=swap" rel="stylesheet">   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="stylecat.css">
    <link rel="shortcut icon" href="/images/ico/logo ico.png" type="image/x-icon">
    <title>Categories</title>
</head>
<body>
    <header>
        <div class="header-elements">
            <h1 id="name"><img src="" alt="">BOOKAURA</h1>
            <div class="navItems">
                <div class="navOpt"><a id="home" href="/">Home</a></div>
                <div class="navOpt"><a href="Categories.html">Categories</a></div>
                <div class="navOpt"><a href="cart.html">Panier</a></div>
            </div>
            <button id="button" type="button" onclick="openLoginPage() ">Login</button>
            <div class="cart">
                <a href=""><img src="images/shopping-cart.svg" alt="Cart"></a>
            </div>
        </div>
    </header>
    <main>
        <section class="catsearchCont">
            <div class="inputContainer">
                <div class="search-area">
                    <button class="allbtn">All <img id="chevron" src="images/chevron-right.svg" alt="All options"><img id="chevrondown" src="images/chevron-down.svg" alt="All options"></button>
                    <input id="searchrequest" type="text" placeholder="Search by Title, Author or keyword...">
                    <button id="entersearch" type="submit" class="allbtn" onclick="submitSearch()"><img id="iconSrch" src="images/search-icon.svg" alt="Enter search"></button>
                </div>
                <div class="search-recs">
                </div>
            </div>
        </section>
        <section class="categoriesBar">
            <nav class="catsNavBar">
                <a class="catoption" href="Categorie.html">Fiction</a>
                <a class="catoption" href="Categorie.html">Biography</a>
                <a class="catoption" href="Categorie.html">History</a>
                <a class="catoption" href="Categorie.html">Horror</a>
                <a class="catoption" href="Categorie.html">Manga</a>
                <a class="catoption" href="Categorie.html">Mystery & Thrillers</a>
                <a class="catoption" href="Categorie.html">Romance</a>
                <a class="catoption" href="Categorie.html">Sci-Fi & Fantasy</a>
                <a class="catoption" href="Categorie.html">Self-Help & Relationships</a>
            </nav>
        </section>

        <section class="acategorieSectionCont">
            <div class="catOurBest"><h5>Our Best Books</h5></div>
            <div class="catTitleAndShowAll">
                <h1 class="cattitle">Our Best Fiction Books</h1>
                <div class="seeAllOption">
                    <button type="button" class="seeAll">See All</button>
                </div>
            </div>
            <section id="ficcatclass" class="catclass">
            </section>
        </section>
        <section class="acategorieSectionCont">
            <div class="catTitleAndShowAll">
                <h1 class="cattitle">Our Best Nonfiction Books</h1>
                <div class="seeAllOption">
                    <button type="button" class="seeAll">See All</button>
                </div>
            </div>
            <section id="nonficcatclass" class="catclass">
            </section>
        </section>
        <section class="acategorieSectionCont">
            <div class="catTitleAndShowAll">
                <h1 class="cattitle">Our Best Biography Books</h1>
                <div class="seeAllOption">
                    <button type="button" class="seeAll">See All</button>
                </div>
            </div>
            <section id="biocatclass" class="catclass">
            </section>
        </section>
        <section class="acategorieSectionCont">
            <div class="catTitleAndShowAll">
                <h1 class="cattitle">Our Best Horror Books</h1>
                <div class="seeAllOption">
                    <button type="button" class="seeAll">See All</button>
                </div>
            </div>
            <section id="horrorcatclass" class="catclass">
            </section>
        </section>
    </main>
    <footer>
        <div class="footeroptions">
            <div id="footerInfo">
                <a href="/">Home</a>
                <a href="">About</a>
                <a href="">Contact</a>
                <a href="">Privacy</a>
                <a href="">Help</a>
                <div id="socialCont">
                    <a href="" class="socialIcon"><img src="images/ico/instagram.svg" alt="Instagram"></a>
                    <a href="" class="socialIcon"><img src="images/ico/facebook.svg" alt="Instagram"></a>
                </div>
                <div id="mapCont">
                    <iframe title="map" id="mapId" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d980.2017338154093!2d4.054777583143902!3d36.69627584318798!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x128dc816c66438fb%3A0x390274960dacce78!2sD%C3%A9partement%20d&#39;Informatique%2C%20UMTO!5e1!3m2!1sen!2sdz!4v1743873514189!5m2!1sen!2sdz" frameborder="0">Location on Maps</iframe>
                </div>
            </div>        
            <div id="logor">
                <h1 id="ftrlogo">BOOKAURA Â®  2025</h1>
            </div>
        </div>
    </footer>
    <script src="booksDb.js"></script>
    <script src="authorsDb.js"></script>
    <script src="Categories.js"></script>
    <script src="script.js"></script> <!-- Load this last -->
    <script>
        function fillFicSection() {
            var ficSection = document.getElementById('ficcatclass');
            for (let i = 0; i < ficBooks.length; i++) {
                var ficbook = document.createElement("div");
                ficbook.classList.add("catbook");

                var bookimg = document.createElement("img");
                bookimg.src = ficBooks[i].bookCover;
                bookimg.classList.add("bookimgc");
                bookimg.alt = ficBooks[i].bookTitle;
                bookimg.onclick = function (event) {
                    event.preventDefault(); // Prevent default link behavior
                    openBookPage(ficBooks[i].bookTitle); // Call the function with the book title
                };
                var bookTitleA = document.createElement("a");
                bookTitleA.href = "#"; // Prevent default navigation
                bookTitleA.onclick = function (event) {
                    event.preventDefault(); // Prevent default link behavior
                    openBookPage(ficBooks[i].bookTitle); // Call the function with the book title
                };
                var bookTitleH6 = document.createElement("h6");
                bookTitleH6.innerText = ficBooks[i].bookTitle;
                bookTitleH6.classList.add("catbooktitle");
                bookTitleA.appendChild(bookTitleH6);

                var bookAuthorA = document.createElement("a");
                bookAuthorA.href = "author.html";
                var bookAuthorH6 = document.createElement("h6");
                bookAuthorH6.innerText = ficBooks[i].bookAuthor;
                bookAuthorH6.classList.add("catbookauthor");
                bookAuthorA.appendChild(bookAuthorH6);

                var bookRating = document.createElement("h6");
                bookRating.innerText = "(" + ficBooks[i].bookRating + "/5)";
                bookRating.classList.add("rating");

                ficbook.appendChild(bookimg);
                ficbook.appendChild(bookTitleA);
                ficbook.appendChild(bookAuthorA);
                ficbook.appendChild(bookRating);
                ficSection.appendChild(ficbook);
            }
        }
        function openBookPage(selectedBookTitle){
            let selectedBook = allBooksObjects.find(book => book.bookTitle === selectedBookTitle);
            let selectedBookAuthor = allAuthors.find(author => author.name === selectedBook.bookAuthor);
            
            if(!selectedBook){
                console.log("Book not found");
            }
            localStorage.setItem("bookTitle", selectedBookTitle);
            localStorage.setItem("bookAuthor", selectedBook.bookAuthor || "unknown");
            localStorage.setItem("bookPrice", selectedBook.bookPrice || "unknown");
            localStorage.setItem("bookCover", selectedBook.bookCover || "unknown");
            localStorage.setItem("bookRating", selectedBook.bookRating || "unknown");
            localStorage.setItem("bookOverview", selectedBook.overview || "unknown");
            localStorage.setItem("bookIsbn", selectedBook.ISBN || "unknown");
            localStorage.setItem("bookPublisher", selectedBook.publisher || "unknown");
            localStorage.setItem("bookDate", selectedBook.publicationDate || "unknown");
            localStorage.setItem("bookPages", selectedBook.pages || "unknown");
            localStorage.setItem("bookDims", selectedBook.productDimensions || "unknown");
            localStorage.setItem("bookAuthorDob", selectedBookAuthor.dob || "unknown");
            localStorage.setItem("bookAuthorShortBio", selectedBookAuthor.shortBio || "unknown");
            localStorage.setItem("bookAuthorPic", selectedBookAuthor.pic || "unknown");
            localStorage.setItem("bookTableArray", JSON.stringify(selectedBook.tableOfContent) || "unknown");
            window.location.href = "book.html"; 
        }
        
    </script>
</body>
</html>